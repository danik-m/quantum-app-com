import numpy as np

def calculate_bell_outcome(angle_a_deg, angle_b_deg):
    """
    Розраховує результат вимірювання спіну для заплутаної пари (синглетний стан).
    
    Аргументи:
    angle_a_deg -- кут детектора Аліси (в градусах)
    angle_b_deg -- кут детектора Боба (в градусах)
    
    Повертає словник:
    {
        "res_a": +1 або -1 (результат Аліси)
        "res_b": +1 або -1 (результат Боба)
    }
    """
    
    # 1. Переводимо кути з градусів у радіани для математичних функцій
    rad_a = np.radians(angle_a_deg)
    rad_b = np.radians(angle_b_deg)
    
    # 2. Вимірювання Аліси (А)
    # Згідно з квантовою механікою, результат вимірювання окремої частинки 
    # є абсолютно випадковим (50% ймовірність Вгору, 50% Вниз).
    # 1 = Спін Вгору (+), -1 = Спін Вниз (-)
    res_a = 1 if np.random.random() < 0.5 else -1
    
    # 3. Вимірювання Боба (B)
    # Результат Боба залежить від результату Аліси та кута між детекторами.
    # Кут між осями вимірювання:
    theta = rad_a - rad_b
    
    # Для пари в синглетному стані (Bell state Psi-), ймовірність отримати 
    # РІЗНІ результати (антикореляція) дорівнює:
    # P(different) = cos^2(theta / 2)
    #
    # Наприклад:
    # - Якщо theta = 0, P(different) = 1.0 (завжди різні, 100% антикореляція)
    # - Якщо theta = 180, P(different) = 0.0 (завжди однакові)
    # - Якщо theta = 90, P(different) = 0.5 (повна випадковість)
    
    prob_different = (np.cos(theta / 2))**2
    
    # Генеруємо випадкове число від 0 до 1
    random_val = np.random.random()
    
    if random_val < prob_different:
        # Результати різні (протилежні знаки)
        res_b = -res_a
    else:
        # Результати однакові (той самий знак)
        res_b = res_a
        
    return {
        "res_a": int(res_a),
        "res_b": int(res_b)
    }